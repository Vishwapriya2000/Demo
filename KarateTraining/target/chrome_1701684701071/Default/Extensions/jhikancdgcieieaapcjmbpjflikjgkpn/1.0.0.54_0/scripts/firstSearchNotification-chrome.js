var promptMarket=chrome.i18n.getMessage("ExtnMarket"),browserLanguage=(navigator.language||navigator.userLanguage).toLowerCase();function firstSearchNotification(t,e){if(e.url){var r=extractQueryString("pc",e.url),i=extractQueryString("form",e.url);e.url.includes("&DPC")&&(r=r+"&DPC="+extractQueryString("DPC",e.url));var a=e.url.includes("search?form="+i+"&pc="+r+"&q=");a&&chrome.storage.local.get({showFirstSearchNotification:!0},(e=>{a&&e&&e.showFirstSearchNotification?(chrome.storage.local.set({showFirstSearchNotification:!1}),chrome.tabs.insertCSS(t,{file:"templates/firstSearchNotification-chrome.css"}),chrome.tabs.executeScript(t,{file:"scripts/injectFirstSearchNotification.js"})):a&&e&&!e.showFirstSearchNotification&&chrome.tabs.onUpdated.removeListener(firstSearchNotification)}))}}function extractQueryString(t,e){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===r?"":r[1]}setTimeout((function(){5==navigator.language.length?"False"!=localStorage.ChangeItback&&chrome.storage.local.get("showFirstSearchNotification",(t=>{(!t&&null==t.showFirstSearchNotification||""==t.showFirstSearchNotification||null==t.showFirstSearchNotification)&&promptMarket==browserLanguage&&chrome.tabs.onUpdated.addListener(firstSearchNotification)})):(promptMkt=promptMarket.substring(0,2),"False"!=localStorage.ChangeItback&&chrome.storage.local.get("showFirstSearchNotification",(t=>{console.log(t.showFirstSearchNotification),(!t&&null==t.showFirstSearchNotification||""==t.showFirstSearchNotification||null==t.showFirstSearchNotification)&&promptMkt==browserLanguage&&chrome.tabs.onUpdated.addListener(firstSearchNotification)})))}),200);var externalCallback=null,notificationDismissed=!1;chrome.runtime.onMessage.addListener((function(t){return"notificationDismissed"==t&&(notificationDismissed=!0,externalCallback&&externalCallback({isEnabled:"true"})),!0})),chrome.runtime.onMessageExternal.addListener((function(t,e,r){return e&&e.url&&e.url.toLocaleLowerCase().includes("https://browserdefaults.microsoft.com/")&&"isExtensionEnabled"==t&&(notificationDismissed?r({isEnabled:"true"}):(console.log("sendResponse:"+r),externalCallback=r)),!0}));